<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/default.css" type="text/css" />
    <link rel="stylesheet" href="../css/megatech.css" type="text/css" />
    <link rel="icon" href="../img/favicon.png" />
    <title>Clock - メガテクボディ合同会社</title>
  </head>
  <body style="background-image:url('../img/background.jpg')">
    <div class="navbar"></div>
    <div class="space"></div>
    <div class="container green">
      <div class="column column-one">
        <div class="content-box">
          <h1 id="clock">Loading...</h1>
        </div>
        <div class="space"></div>
      </div>
    </div>
    <div class="container green">
      <div class="column column-one">
        <div class="content-box">
          <label>Time:</label>
          <input id="hour" class="green" type="text" size="2" pattern="[0-1][0-9]" name="hour" min="1" max="12" value="1" onchange="stopped = false"></input>
          <input id="minute" class="green" type="text" size="2" pattern="[0-5][0-9]" name="minute" min="0" max="59" value="00" onchange="stopped = false"></input>
          <select id="ampm" class="green">
            <option value="am">AM</option>
            <option value="pm">PM</option>
          </select>
          <br />
          <label>Alarm:</label>
          <select id="track" class="green" onchange="setAlarm(this.options[this.selectedIndex])" onload="setAlarm(this.options[this.selectedIndex])">
            <option value="Alarm01.wav" selected="">Alarm 1</option>
            <option value="Alarm02.wav">Alarm 2</option>
            <option value="Alarm03.wav">Alarm 3</option>
            <option value="Alarm04.wav">Alarm 4</option>
            <option value="Alarm05.wav">Alarm 5</option>
            <option value="Alarm06.wav">Alarm 6</option>
            <option value="Alarm07.wav">Alarm 7</option>
            <option value="Alarm08.wav">Alarm 8</option>
            <option value="Alarm09.wav">Alarm 9</option>
            <option value="Alarm10.wav">Alarm 10</option>
          </select>
          <audio id="alarm" loop="" controls="" style="vertical-align: middle;" onpause="stopped = true">
            <source id="alarm-source" src="../media/audio/Alarm01.wav" type="audio/wav" />
          </audio>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="../js/index.js"></script>
    <script>
      var m = new Megatech()
      $('div[class="navbar"]').load('../html/navbar.html', function() {
        var navbar = $('div[class="navbar"]')[0]
        m.handleNavBar(navbar)
      })

      var setAlarm = function (option) {
        document.getElementById('alarm-source').src = '../media/audio/' + option.value
        document.getElementById('alarm').load()
      }

      var stopped = false

      setInterval(function () {
        var date = new Date()
        var hours = Number(document.getElementById('hours').value)
        var minutes = Number(document.getElementById('minutes').value)
        $('#clock').html(date.toLocaleDateString() + '<br />' + date.toLocaleTimeString())
        if (!stopped && date.getHours() === hours && date.getMinutes() === minutes) { document.getElementById('alarm').play() }
      }, 1000)
    </script>
  </body>
</html>