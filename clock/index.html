<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../css/default.css" type="text/css" />
        <link rel="icon" href="../img/favicon.ico" />
        <title>Clock - メガテクボディ合同会社</title>
    </head>
    <body style="background-image:url('../img/background.jpg')">
        <div id="navbar" class="navbar monospace"></div>
        <div class="space"></div>
        <div id="output" class="center monospace">
            <div class="transbox glow">
                <h1 id="date" class="pixel"></h1>
                <h1 id="clock" class="pixel"></h1>
            </div>
        </div>
        <div id="input" class="center monospace">
            <div class="transbox glow">
                <label>Time:</label>
                <input id="hour" type="number" name="hour" min="1" max="12" />
                <input id="minute" type="number" name="minute" min="0" max="59" />
                <select id="ampm">
                    <option value="am">AM</option>
                    <option value="pm">PM</option>
                </select>
                <br />
                <br />
                <label>Alarm:</label>
                <select id="track" onchange="document.getElementById('alarm-source').src='../media/'+this.value;document.getElementById('alarm').load();">
                    <option value="Alarm01.wav" selected="">Alarm 1</option>
                    <option value="Alarm02.wav">Alarm 2</option>
                    <option value="Alarm03.wav">Alarm 3</option>
                    <option value="Alarm04.wav">Alarm 4</option>
                    <option value="Alarm05.wav">Alarm 5</option>
                    <option value="Alarm06.wav">Alarm 6</option>
                    <option value="Alarm07.wav">Alarm 7</option>
                    <option value="Alarm08.wav">Alarm 8</option>
                    <option value="Alarm09.wav">Alarm 9</option>
                    <option value="Alarm10.wav">Alarm 10</option>
                </select>
                <audio id="alarm" loop="" controls="" style="vertical-align: middle;">
                    <source id="alarm-source" src="../media/Alarm01.wav" type="audio/wav" />
                </audio>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="../js/megatech.js"></script>
        <script>
            $("#navbar").load("../html/navbar.html", function(){
                var navbar = $("#navigation")[0]; 
                megatech.handleNavBar(navbar);
            });

            var alarm = document.getElementById('alarm');
            alarm.children[0].src = "../media/" + document.getElementById("track").value;
            alarm.load();
            setInterval(function(){
                var date = new Date();
                var hours = document.getElementById("hour").value;
                var minutes = document.getElementById("minute").value;
                var alarmDate = new Date();
                if(document.getElementById("ampm").value === "pm"){
                    hours = (hours + 12) % 24;
                }
                alarmDate = new Date(0);
                alarmDate.setHours(hours);
                alarmDate.setMinutes(minutes);
                $("#date").text(date.toLocaleDateString());
                $("#clock").text(date.toLocaleTimeString());
                if(date.getHours() === alarmDate.getHours() && date.getMinutes() === alarmDate.getMinutes()){
                    alarm.play();
                }
            }, 1000);
        </script>
    </body>
</html>