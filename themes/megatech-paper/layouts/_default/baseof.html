{{ $is_page_or_section := (or .Page.IsSection .Page.IsPage) }}
{{ $title := .Site.Title }}
{{ if $is_page_or_section }}
{{ $title = .Page.Title }}
{{ end }}
<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {{ with .Site.Home.OutputFormats.Get "rss" -}}
    {{ printf `<link rel=%q type=%q href=%q title=%q>` .Rel .MediaType.Type .Permalink site.Title | safeHTML }}
    {{ end }}
    {{ if .Site.Params.Author.Name }}
    <meta name="author" content="{{ .Site.Params.Author.Name }}" />
    {{ end }}
    {{ with .Keywords }}
    <meta name="keywords" content="{{ range $i, $e := . }}{{ if $i }}, {{ end }}{{ $e }}{{ end }}" />
    {{ end }}
    {{ if .Params.Summary }}
    <meta name="description" content="{{ .Summary }}" />
    {{ end }}
    {{ hugo.Generator }}
    <title>{{ .Site.Title }}{{ if $is_page_or_section }} - {{ $title }}{{ end }}</title>
    <style>
      {{ partial "css/colors.css" . | safeCSS }}
      {{ partial "css/fira.css" . | safeCSS }}
      {{ partial "css/fira_code.css" . | safeCSS }}
      {{ partial "css/fonts.css" . | safeCSS }}
      {{ partial "css/grid.css" . | safeCSS }}
      {{ partial "css/elements.css" . | safeCSS }}
      {{ if .Page.Params.highlighter }}
      {{ partial "css/highlight.css" . | safeCSS }}
      {{ end }}
    </style>
    {{ block "head" . }}{{ end }}
  </head>
  <body>
    <div class="grid-container">
      <div class="left-column"></div>
      <div class="middle-column">
        <header>
          <hr />
          <h1 class="title center-text">{{ .Site.Title }}</h1>
          <div class="nav-grid-container">
            <nav>
              <a href="{{ .Site.Home.Permalink }}">~</a>&nbsp;/
              {{ range .Site.Sections.ByTitle }}
              <a href="{{ .Permalink }}">{{ replace (lower .Section) "_" " " }}</a>&nbsp;/
              {{ end }}
            </nav>
            <nav class="icons">
            {{ with .Site.Home.OutputFormats.Get "rss" -}}
              <a href="{{ .Permalink }}"><img class="icon" alt="RSS Feed" aria-label="RSS Feed" src="/img/svg/rss.svg" /></a>
            {{ end }}
            </nav>
          </div>
        <hr />
        </header>
        <main>
        {{ if $is_page_or_section }}<h1 class="center-text">{{ $title }}</h1>{{ else }}<br />{{ end }}
        {{ block "main" . }}{{ end }}
        </main>
        <footer>
          <hr />
          <nav class="center-text"><a href="#">top</a></nav>
          <hr />
        </footer>
      </div>
      <div class="right-column"></div>
    </div>
    {{ block "scripts" . }}{{ end }}
    {{ if .Page.Params.highlighter }}
    <script src="/js/highlight.min.js"></script>
    <script>
      window.addEventListener('load', hljs.highlightAll);
    </script>
    {{ end }}
  </body>
</html>
