<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="../css/default.css" type="text/css" />
		<link rel="stylesheet" href="../css/highlight/solarized-dark.css" type="text/css" />
		<link rel="icon" href="../img/favicon.png" />
		<title>Megatech - Visitor Info</title>
	</head>
	<body onload="init();">
		<div id="header" class="bar fixed" style="top: 0;"></div>
		<div class="space"></div>
		<div class="space"></div>
		<div id="body" class="align-center">
			<h1>Visitor Info</h1>
			<div class="justify" style="display: inline-block;">
				<p>unique visitors: <span id="uniques">0</span></p>
				<p>current address: <span id="address">0.0.0.0</span></p>
				<p>&nbsp;&nbsp;&nbsp;last visited: <span id="update">0</span></p>
			</div>
		</div>
		<div id="footer" class="bar align-center"></div>
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<script src="../js/theme.js"></script>
		<script>
			function init() {
				$.getJSON('http://pi.megate.ch:8080/visitor/info', (data) => {
					$('#uniques').text(data.uniques);
					$('#address').text(data.info.ip);
					$('#update').text(new Date(data.info.update).toLocaleString());
				})
			}

			let theme = new Theme('white', 'black-background', 'monospace');
			$('#header').load('../html/navbar.html');
			$('#footer').load('../html/themebar.html');
		</script>
	</body>
</html>
